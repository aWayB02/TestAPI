# Простое объяснение архитектуры MVC для приложения To-Do List

## Что такое MVC?

MVC - это способ организации кода в приложении, который делит его на три части:

1. **Model (Модель)** - это как "что" мы храним (данные)
2. **View (Представление)** - это как "как" мы показываем данные
3. **Controller (Контроллер)** - это "кто" управляет всем процессом

Представьте ресторан:
- **Model** - это ингредиенты и рецепты (что готовим)
- **View** - это как блюдо выглядит на тарелке (как показываем)
- **Controller** - это повар, который решает что, когда и как готовить

## Как это работает в нашем To-Do List приложении?

### 1. Model (Модель) - `models/todo.py`

Модель - это описание задачи. Представьте, что задача это как "карточка" с информацией:

```python
class Todo:
    def __init__(self, title, description):
        self.title = title          # Название задачи
        self.description = description  # Описание задачи
        self.completed = False      # Выполнена ли задача (по умолчанию нет)
        self.created_at = datetime.now()  # Когда создали
```

Пример задачи:
```
Заголовок: "Купить молоко"
Описание: "Сходить в магазин после работы"
Выполнена: Нет
Создана: 22.02.2026 10:00
```

### 2. View (Представление) - как мы показываем данные

В нашем API приложении View - это JSON ответы, которые мы отправляем:

```json
{
  "status": "success",
  "data": {
    "id": 1,
    "title": "Купить молоко",
    "description": "Сходить в магазин после работы",
    "completed": false,
    "created_at": "2026-02-22T10:00:00Z"
  }
}
```

### 3. Controller (Контроллер) - `api/todo_api.py`

Контроллер - это как "менеджер", который:
1. Принимает запрос от пользователя
2. Говорит сервису что нужно сделать
3. Отправляет результат пользователю

Пример работы:
```
Пользователь: "Хочу создать задачу 'Купить молоко'"
Контроллер:   "Принял! Передаю это сервису..."
Сервис:       "Создаю задачу и сохраняю в базу данных"
Контроллер:   "Готово! Отправляю ответ пользователю"
Пользователь: Получает JSON с созданной задачей
```

## Паттерн Repository (Репозиторий) - `repositories/todo_repository.py`

Это как "библиотекарь", который знает как работать с базой данных:

- `create()` - добавить новую книгу (задачу) в библиотеку
- `get_by_id()` - найти книгу по номеру
- `get_all()` - показать все книги
- `update()` - обновить информацию о книге
- `delete()` - удалить книгу

## Паттерн Service (Сервис) - `services/todo_service.py`

Это как "шеф-повар", который:
1. Проверяет правильность заказа (валидация)
2. Говорит библиотекарю что нужно сделать
3. Готовит "блюдо" (результат) для пользователя

Пример:
```
Пользователь: "Хочу создать задачу с пустым названием"
Сервис:       "Стоп! Название не может быть пустым!"
Пользователь: Получает ошибку
```

## Как все это работает вместе?

1. **Пользователь** отправляет запрос (через Postman или фронтенд):
   ```
   POST /api/v1/todos
   {
     "title": "Купить молоко",
     "description": "Сходить в магазин"
   }
   ```

2. **Контроллер** (`api/todo_api.py`) принимает запрос:
   - Проверяет что данные пришли
   - Передает их Сервису

3. **Сервис** (`services/todo_service.py`) обрабатывает запрос:
   - Проверяет что заголовок не пустой
   - Создает объект Todo
   - Передает его Репозиторию

4. **Репозиторий** (`repositories/todo_repository.py`) работает с базой:
   - Сохраняет задачу в SQLite
   - Возвращает сохраненную задачу

5. **Контроллер** отправляет ответ пользователю:
   ```json
   {
     "status": "success",
     "data": {
       "id": 1,
       "title": "Купить молоко",
       "description": "Сходить в магазин",
       "completed": false,
       "created_at": "2026-02-22T10:00:00Z"
     }
   }
   ```

## Почему такая архитектура?

1. **Разделение ответственности** - каждый знает что делать
2. **Легко тестировать** - можно проверить каждый компонент отдельно
3. **Легко менять** - если поменяем базу данных, сервис не изменится
4. **Легко понимать** - четкая структура, как в книге с оглавлением

## Простая аналогия

Представьте почтовое отделение:

- **Model** - это письмо (что отправляем)
- **Controller** - это почтальон (принимает и доставляет письма)
- **Service** - это сортировщик (проверяет письма, сортирует)
- **Repository** - это архив (хранит письма, выдает по запросу)
- **View** - это конверт (как письмо выглядит при отправке)

Когда вы отправляете письмо:
1. Почтальон принимает его (Controller)
2. Сортировщик проверяет адрес (Service)
3. Кладет в нужный ящик архива (Repository)
4. Отправляет подтверждение в красивом конверте (View)