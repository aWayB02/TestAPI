# To-Do List API

Минимальный рабочий проект to-do list с базой данных SQLite и FastAPI.

## Описание

Это простое API для управления списком задач (to-do list) с использованием FastAPI и SQLite. 
Проект не требует авторизации и предоставляет базовые функции для создания, просмотра, 
обновления и удаления задач.

## Функциональность

- Создание задач
- Просмотр списка всех задач
- Получение информации о конкретной задаче
- Обновление задач (редактирование текста и статуса)
- Удаление задач
- Фильтрация задач по статусу выполнения

## Технологии

- Python 3.8+
- FastAPI
- SQLAlchemy
- SQLite
- Uvicorn (для запуска сервера)

## Установка

1. Клонируйте репозиторий:
   ```
   git clone <repository-url>
   cd todo-app
   ```

2. Создайте виртуальное окружение:
   ```
   python -m venv venv
   source venv/bin/activate  # На Windows: venv\Scripts\activate
   ```

3. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```

## Запуск приложения

Для запуска приложения выполните команду:

```
uvicorn app:app --reload
```

После запуска API будет доступно по адресу: http://localhost:8000

Документация API доступна по адресам:
- http://localhost:8000/docs (Swagger UI)
- http://localhost:8000/redoc (ReDoc)

## Структура проекта

```
todo-app/
│
├── app.py                 # Точка входа в приложение
├── config.py              # Конфигурационный файл
├── requirements.txt        # Зависимости проекта
├── README.md              # Документация проекта
├── .gitignore             # Игнорируемые файлы для Git
│
├── models/                # Модели данных
│   ├── __init__.py
│   └── todo.py           # Модель задачи
│
├── services/              # Бизнес-логика
│   ├── __init__.py
│   └── todo_service.py   # Сервис для работы с задачами
│
├── repositories/          # Репозитории для работы с БД
│   ├── __init__.py
│   └── todo_repository.py # Репозиторий задач
│
├── api/                   # API endpoints
│   ├── __init__.py
│   └── todo_api.py       # API для задач
│
├── database/             # Работа с базой данных
│   ├── __init__.py
│   └── db.py            # Инициализация БД
│
└── migrations/          # Миграции базы данных
    └── init_db.py        # Инициализация базы данных
```

## API Endpoints

### Получить список всех задач

```
GET /api/v1/todos
```

Параметры запроса:
- `completed` (опционально) - фильтр по статусу выполнения (true/false)
- `limit` (опционально) - ограничение количества результатов (по умолчанию 100)
- `offset` (опционально) - смещение для пагинации (по умолчанию 0)

### Получить задачу по ID

```
GET /api/v1/todos/{id}
```

### Создать новую задачу

```
POST /api/v1/todos
```

Тело запроса:
```json
{
  "title": "string",
  "description": "string (опционально)"
}
```

### Обновить задачу

```
PUT /api/v1/todos/{id}
```

Тело запроса:
```json
{
  "title": "string (опционально)",
  "description": "string (опционально)",
  "completed": "boolean (опционально)"
}
```

### Удалить задачу

```
DELETE /api/v1/todos/{id}
```

## Разработка

Проект следует архитектуре, разделенной на слои:
- Модели (models) - определение структуры данных
- Репозитории (repositories) - работа с базой данных
- Сервисы (services) - бизнес-логика
- API (api) - обработчики HTTP запросов

### Паттерн MVC

Паттерн MVC (Model-View-Controller) - это архитектурный паттерн проектирования, который разделяет приложение на три основных компонента:

1. **Model (Модель)** - отвечает за данные и бизнес-логику
2. **View (Представление)** - отвечает за отображение данных пользователю
3. **Controller (Контроллер)** - обрабатывает пользовательский ввод и координирует работу между Model и View

В проекте To-Do List используется адаптированная версия паттерна MVC с элементами Clean Architecture:

#### 1. Model (Модель)
Файл: `models/todo.py`

Модель `Todo` представляет собой класс, который:
- Определяет структуру задачи (id, title, description, completed, created_at, updated_at)
- Содержит методы для работы с данными задачи (mark_completed, mark_uncompleted, update)
- Реализует преобразование в/из словаря (to_dict, from_dict)

#### 2. View (Представление)
В данном API-проекте представление реализовано в виде JSON-ответов, которые формируются в API слое.

#### 3. Controller (Контроллер)
Файл: `api/todo_api.py`

Контроллер реализован в виде FastAPI роутера, который:
- Обрабатывает HTTP запросы
- Выполняет валидацию входных данных
- Вызывает методы сервисного слоя
- Формирует HTTP ответы

### Расширенная архитектура проекта

Проект использует расширенную версию MVC с дополнительными слоями:

```
mermaid
graph TD
    A[Клиент] --> B[API Layer]
    B --> C[Service Layer]
    C --> D[Data Access Layer]
    D --> E[SQLite Database]
    C --> F[Business Logic]
```

#### Слои архитектуры:

1. **API Layer (Presentation Layer)** - `api/todo_api.py`
   - Обработка HTTP запросов
   - Валидация входных данных
   - Формирование ответов

2. **Service Layer (Application Layer)** - `services/todo_service.py`
   - Бизнес-логика приложения
   - Валидация данных
   - Координация между компонентами

3. **Data Access Layer (Persistence Layer)** - `repositories/todo_repository.py`
   - Взаимодействие с базой данных через SQLAlchemy
   - Выполнение CRUD операций

4. **Domain Layer (Models)** - `models/todo.py`
   - Определение структуры данных
   - Бизнес-правила

### Преимущества выбранной архитектуры

1. **Разделение ответственности** - каждый слой имеет четко определенную роль
2. **Тестируемость** - каждый компонент может быть протестирован отдельно
3. **Расширяемость** - легко добавлять новую функциональность
4. **Поддерживаемость** - понятная структура упрощает сопровождение
5. **Гибкость** - возможность замены компонентов без изменения всей системы

## Лицензия

Этот проект распространяется без лицензии.